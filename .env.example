# Database
# Get your Neon connection string from: https://console.neon.tech/app/projects
# Use the pooled connection string for serverless deployments
# Format: postgresql://[user]:[password]@[endpoint].neon.tech/[database]?sslmode=require
DATABASE_URL="postgresql://[user]:[password]@[endpoint].neon.tech/[database]?sslmode=require"

# ⚠️  TEST DATABASE - PGLITE (NO SETUP REQUIRED!) ⚠️
# Integration tests use PGlite - a WASM build of Postgres that runs in-process.
#
# Benefits:
# - Zero setup: No Docker, no cloud test project needed
# - Complete isolation: In-memory database, cannot affect production
# - Fast: In-process, no network overhead
# - Real Postgres: Not SQLite, catches Postgres-specific bugs
#
# How it works:
# - Tests import from @/lib/db/test-client (not @/lib/db/client)
# - PGlite creates a fresh in-memory Postgres database for each test run
# - Schema is applied automatically via migrations in initializeTestSchema()
# - Tests run with `bun run test:integration`
#
# SAFETY: Even though tests use unconditional DELETE statements, they can't
# affect production because PGlite never connects to external databases.
#
# See GitHub Issue #39 for context on why we chose PGlite over Docker/cloud databases.

# Azure DevOps API (for PR/pipeline/deployment ingestion)
# Get your PAT from: https://dev.azure.com/{your-org}/_usersSettings/tokens
AZURE_DEVOPS_PAT="your_pat_here"
AZURE_DEVOPS_ORG="your_org_name"

# Optional: Exclude specific projects from metrics tracking (comma-separated)
# Projects are automatically discovered from the organization
# AZURE_DEVOPS_EXCLUDE_PROJECTS="archived-project,test-sandbox"

# Azure DevOps API Configuration (Hardening)
# Request timeout in milliseconds (default: 30000 = 30 seconds)
# AZURE_DEVOPS_REQUEST_TIMEOUT="30000"
# Maximum retry attempts for failed API calls (default: 3)
# AZURE_DEVOPS_MAX_RETRIES="3"
# Rate limit threshold in requests per minute (default: 200)
# Azure DevOps enforces 200 requests/minute limit
# AZURE_DEVOPS_RATE_LIMIT_PER_MIN="200"

# API Security
# API key for manual deployment event submission endpoint
# Generate a secure random string (e.g., openssl rand -hex 32)
DEPLOYMENT_API_KEY="your_secure_api_key_here"

# Metrics Configuration
WEEK_START_DAY="monday"
METRICS_CALCULATION_CRON="0 0 * * 1" # Every Monday at midnight

# Application
NODE_ENV="development"
